<template name="OutOfStockReason">
  <div class="{styles.stockMarketing}">
    <!--查询条件-->
    <conditionsStock {onSearch} showDataRange showCategory showBrand showDateDays showSKU  />
    <div class="{styles.pageCnt}">
      <OutOfStockReasonTable />
    </div>
  </div>
</template>

<template name="OutOfStockReasonSelect">
  <span>
    <#if {outOfStockReasons}>
    <ant-Select value="{currValue}"
                onChange={onSelectChange}
                disabled={disabled}
                style="min-width: 90px"
    >
      <#each {outOfStockReasons}>
        <ant-Option key={code} value={code}>{name}</ant-Option>
      </#each>
    </ant-Select>
    </#if>
  </span>
</template>

<template name="OutOfStockReasonTable">
  <div>
    <fj-Row class="dlgTargetSettings clearfix" gutter={20}>
      <fj-Col l="6">
        <h2 class="{styles.pageTitle}">缺货原因录入</h2>
      </fj-Col>
      <fj-col l="6">
        <div class={styles.tableControlBar}>
          <span>批量编辑：<OutOfStockReasonSelect onChange={onReasonChangeBatch} value={reasonIdBatch} defValue={selectReasonIdDef} disabled={selectBatchDisabled} /></span>
          <span><ant-Button type="primary" onClick={onClickSave}>保存全部</ant-Button></span>
          <span><ant-Button onClick={onExport}>导出全部</ant-Button></span>
        </div>
        <form action={formAction} target="ifrExport" method="post" ref="formExport">
          <input type="hidden" name="categoryId1" value="{queryParams.categoryId1}">
          <input type="hidden" name="categoryId2" value="{queryParams.categoryId2}">
          <input type="hidden" name="categoryId3" value="{queryParams.categoryId3}">
          <input type="hidden" name="brandId" value="{queryParams.brandId}">
          <input type="hidden" name="dataRange" value="{queryParams.dataRange}">
          <input type="hidden" name="sku" value="{queryParams.sku}">
          <input type="hidden" name="date" value="{queryParams.date}">
          <iframe style="display:none" id="ifrExport" name="ifrExport" src="about:blank"></iframe>
        </form>
      </fj-col>
    </fj-Row>
    <ant-Table
            columns={columns}
            dataSource={outOfStockList}
            rowKey={getTableRowKey}
            pagination={false}
            bordered,
            rowSelection={rowSelection}
    />
    <div class="{styles.paginationWrap}">
      <ant-Pagination current={page} total={total} onChange={onPaging} />
    </div>
    <ant-Modal
            title={null}
            width={960}
            visible={dlgPurchasePlanListVisible}
            onCancel={dlgPurchasePlanListCancel}
            footer={null}
    >
      <div class={styles.dlgPurchasePlanList}>
        <ant-Table
                columns={purchasePlanListColumns}
                dataSource={purchasePlanList}
                rowKey="poNo"
                pagination={false}
                bordered
        />
      </div>
    </ant-Modal>
  </div>
</template>