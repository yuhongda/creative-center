<template name="orderFillRateMonitor">
  <section class="{styles.wrap}">
    <!--查询条件-->
    <conditionsStock {onSearch} showCategory showBrand showMonthDate  />
    <div class="{styles.itemBlock}">
      <h2 class="{styles.pageTitle}">采购管理</h2>
      <fj-row class="vic-clearfix" gutter="15">
        <fj-col l=6>
          <NewOrder />
        </fj-col>
        <fj-col l=6  class="{styles.completeOrder}">
          <CompleteOrder />
        </fj-col>
      </fj-row>
      <div class="{styles.completeAverageCycle}">
        <CompleteAverageCycle />
      </div>
    </div>
  </section>
</template>

<template name="newOrder">
  <ant-Card title="新订单">
    <fj-row class="{styles.newOrder} vic-clearfix">
      <fj-col l=5>
        <ec-PieChart option={toJS(pieChartOptions)} data={toJS(pieChartData)} update={true} height="{230}"/>
      </fj-col>
      <fj-col l=7>
        <ant-Table {columns} dataSource={data} size="middle" pagination="{false}" rowKey="type" />
      </fj-col>
    </fj-row>
  </ant-Card>
</template>

<template name="completeOrder">
  <ant-Card title="完成订单">
    <@extra>
      <ant-Tooltip placement="topRight" overlayClassName="{styles.tooltipClass}">
        <@title>
          <dl>
            <dt>选择需要的属性</dt>
            <dd>
              <ant-CheckboxGroup {value} {options} {onChange} />
            </dd>
          </dl>
        </@title>
        <ant-Icon type="setting" />
      </ant-Tooltip>
    </@extra>
    <div class="vic-clearfix">
      <#each {orderList}>
        <div class="{styles.item}" key="{id}">
          <h2>{name}</h2>
          <h3>
            <#if {id ==('completePurchaseOrderCount')}>
              <p>{value}<span>单</span></p>
              <#elseif {id ==('completePurchaseSum')}>
                <p>{valueSP}<span>万元</span></p>
              </#elseif>
              <#elseif {id ==('completeAverageCycle') ||(id ==('submitToConfirmDate'))}>
                <p>{value}<span>天</span></p>
              </#elseif>
              <#else>
                <p>{value | percentOrder(2)}</p>
              </#else>
            </#if>
          </h3>
        </div>
      </#each>
    </div>
  </ant-Card>
</template>

<template name="completeAverageCycle">
  <ant-Card title="平均完成周期">
    <div class="{styles.box}">
      <ec-BarChart option={toJS(barChartOptions)} data={toJS(barChartData)} update={true} ref="{completeAverageCycleRef}" />
    </div>
  </ant-Card>
</template>